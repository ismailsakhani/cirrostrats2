{% extends "dj_app/base.html" %}

{% load static %}

{% block content %}
  <link rel="stylesheet" type="text/css" href="{% static 'flight_deet.css' %}">

<style>
    
  /* Add light and dark mode switch styles */
  .dark-mode-switch {
    position: fixed ;
    display: flex;
    align-items: center;
    justify-content: center; /* Add this line to center horizontally */
    top: 2%;
    left: 70%;
    z-index: 999; /* Increase the z-index value */
  }
  
  /* Hide the default checkbox */
  .dark-mode-switch input[type="checkbox"] {
    display: none;
  }
  
  /* Style the toggle switch */
  .dark-mode-switch label {
    display: block;
    width: 50px; /* Adjust the width as per your preference */
    height: 26px; /* Adjust the height as per your preference */
    border-radius: 13px; /* Half of the height to create a round switch */
    background-color: #ccc; /* Default background color */
    position: relative;
    cursor: pointer;
  }
  
  /* Style the toggle switch handle */
  .dark-mode-switch label::after {
    content: "";
    position: absolute;
    top: 2px; /* Adjust the position as per your preference */
    left: 2px; /* Adjust the position as per your preference */
    width: 22px; /* Adjust the width as per your preference */
    height: 22px; /* Adjust the height as per your preference */
    border-radius: 50%; /* Create a round handle */
    background-color: #fff; /* Default handle color */
    transition: all 0.3s ease-in-out;
  }
  
  /* Adjust the appearance for the checked (dark mode) state */
  .dark-mode-switch input[type="checkbox"]:checked + label {
    background-color: #6b6b6b; /* Background color for dark mode */
  }
  
  .dark-mode-switch input[type="checkbox"]:checked + label::after {
    transform: translateX(24px); /* Move the handle to the right for checked state */
  }
  
  </style>

 <!-- Light and dark mode switch -->
 <div class="dark-mode-switch">
  <input type="checkbox" id="darkModeToggle" onchange="toggleDarkMode()">
  <label for="darkModeToggle"></label>
</div>

  <h3>United Flight Information</h3>
  <h4>Results for UA{{flight_query}} at {{current_time}}</h4>
  {% if dep_des %}
    <table class="comparison-table">
      <thead>
        <tr>
          <th>Departure; {zulu time; local}</th>
          {% for type, juice in dep_weather.items %}
          {% endfor %}
        </tr>
      <tbody>
        {% for flight_num, dep_des_list in dep_des.items %}
          <tr>
            <td>{{ dep_des_list.0 }}</td> <!-- Departure ID -->
           {% for metar_taf_title, metar_taf_data in dep_weather.items %}
           <tr>
            <tr>
              <th>{{ metar_taf_title }}</th>
            </tr>
            <td> {{ metar_taf_data|safe }} </td>      
           </tr>       
            {% endfor %}
          </tr>
        </thead>
        {% endfor %}
      </tbody>
    </table>
    <table class="comparison-table">
      <thead>
        <tr>
          <th>Destination {zulu time; local}</th>
        </tr>
       <tbody>
        {% for flight_num, dep_des_list in dep_des.items %}
        <tr>
          <td>{{ dep_des_list.1 }}</td>  <!-- Destination ID  -->
          {% for metar_taf_title, metar_taf_data in dest_weather.items %}
          <tr>
            <tr>
              <th>{{ metar_taf_title }}</th>
            </tr>
            <td>{{ metar_taf_data|safe }}</td> <!-- safe allows it to print char "/n"  for a new line -->
           </tr>
          {% endfor %}
        </tr>
      </thead>
      {% endfor %}
     </tbody>
    </table>
  {% else %}
    <p>No details found for {{flight_query}}.</p>
      <strong>Try the following Examples:</strong>
      <br><br>
      <em>C71X</em>: Lists all scheduled departures from the requested gate. You can just search for `X` in this case.
      <br><br>
      <em>i 492 ewr:</em> Returns METAR, and TAF at both departure and arrival airports for the given flight number. Use the `i` switch followed by the flight number followed by 3 letter departure code.
      <br><br>
      <em>w KEWR:</em> Returns the latest METAR and TAF for the given airport. Use the `w` switch followed by the 4 letter ICAO identifier of the airport.
      <br><br>
      Empty search returns information on all gates for United flights in KEWR.
  {% endif %}
  {% csrf_token %}
  <div class="search-form-wrapper">
    <form method="post" class="search-form">
      {% csrf_token %}
      <label for="query"></label>
      <input type="text" name="query" id="query">
      <button type="submit">Search</button>
    </form>
  </div>

  <script>
    // JavaScript function to toggle dark mode
    function toggleDarkMode() {
      var body = document.body;
      body.classList.toggle("dark-mode");
    }
  </script>


{% endblock %}